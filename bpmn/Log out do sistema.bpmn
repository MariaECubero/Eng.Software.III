<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0" id="sid-38422fae-e03e-43a3-bef4-bd33b32041b2" targetNamespace="http://bpmn.io/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="18.6.1">
  <collaboration id="Collaboration_0mcq77p">
    <participant id="Participant_1fbh1c3" name="Usuário" processRef="Process_1" />
    <participant id="Participant_01l9s0h" name="Sistema" processRef="Process_0wprb3e" />
    <messageFlow id="Flow_1snwqmz" sourceRef="Activity_0t7vlbd" targetRef="Activity_1trrije" />
    <textAnnotation id="TextAnnotation_0uo8rtc">
      <text>permanece na aplicação</text>
    </textAnnotation>
    <association id="Association_0jqthwh" associationDirection="None" sourceRef="Event_11k74fr" targetRef="TextAnnotation_0uo8rtc" />
    <textAnnotation id="TextAnnotation_0e16eo0">
      <text>grava log/auditoria (usuario, ip, horário, device)</text>
    </textAnnotation>
    <association id="Association_11ckvyg" associationDirection="None" sourceRef="Activity_02iafml" targetRef="TextAnnotation_0e16eo0" />
  </collaboration>
  <process id="Process_1" isExecutable="false">
    <sequenceFlow id="Flow_146shys" name="Confirmar saída" sourceRef="StartEvent_1y45yut" targetRef="Gateway_0jnb9od" />
    <sequenceFlow id="Flow_05xirqo" name="Não" sourceRef="Gateway_0jnb9od" targetRef="Event_11k74fr" />
    <endEvent id="Event_11k74fr">
      <incoming>Flow_05xirqo</incoming>
    </endEvent>
    <sequenceFlow id="Flow_0riygca" sourceRef="Gateway_0jnb9od" targetRef="Activity_0t7vlbd" />
    <exclusiveGateway id="Gateway_0jnb9od">
      <incoming>Flow_146shys</incoming>
      <outgoing>Flow_05xirqo</outgoing>
      <outgoing>Flow_0riygca</outgoing>
    </exclusiveGateway>
    <startEvent id="StartEvent_1y45yut" name="Usuário clica em “Sair / Log out”">
      <outgoing>Flow_146shys</outgoing>
    </startEvent>
    <task id="Activity_0t7vlbd" name="Aguardar             o log out">
      <incoming>Flow_0riygca</incoming>
    </task>
  </process>
  <process id="Process_0wprb3e">
    <laneSet id="LaneSet_0ctw1c2">
      <lane id="Lane_0hjso1v" name="API de Autenticação">
        <flowNodeRef>Activity_1ywmqne</flowNodeRef>
        <flowNodeRef>Activity_1l7j3gp</flowNodeRef>
        <flowNodeRef>Gateway_0b22tmx</flowNodeRef>
        <flowNodeRef>Activity_02iafml</flowNodeRef>
        <flowNodeRef>Activity_1o13pac</flowNodeRef>
      </lane>
      <lane id="Lane_1p9ohht" name="Frontend">
        <flowNodeRef>Activity_1cj5xbq</flowNodeRef>
        <flowNodeRef>Event_059720i</flowNodeRef>
        <flowNodeRef>Activity_0870n9w</flowNodeRef>
        <flowNodeRef>Activity_1trrije</flowNodeRef>
      </lane>
    </laneSet>
    <sequenceFlow id="Flow_1l37zzn" sourceRef="Activity_1ywmqne" targetRef="Activity_1l7j3gp" />
    <serviceTask id="Activity_1ywmqne" name="Enviar refresh token / id de sessão">
      <incoming>Flow_1ikex4x</incoming>
      <outgoing>Flow_1l37zzn</outgoing>
    </serviceTask>
    <serviceTask id="Activity_1l7j3gp" name="Validar o token/sessão">
      <incoming>Flow_1l37zzn</incoming>
      <outgoing>Flow_15rou64</outgoing>
    </serviceTask>
    <exclusiveGateway id="Gateway_0b22tmx">
      <incoming>Flow_15rou64</incoming>
      <outgoing>Flow_18b64m8</outgoing>
      <outgoing>Flow_0idpuwy</outgoing>
    </exclusiveGateway>
    <sequenceFlow id="Flow_15rou64" sourceRef="Activity_1l7j3gp" targetRef="Gateway_0b22tmx" />
    <sequenceFlow id="Flow_18b64m8" sourceRef="Gateway_0b22tmx" targetRef="Activity_1cj5xbq" />
    <userTask id="Activity_1cj5xbq" name="redireciona para a Tela de Login e exibe “Sessão encerrada”">
      <incoming>Flow_18b64m8</incoming>
      <outgoing>Flow_1d9k7b6</outgoing>
    </userTask>
    <endEvent id="Event_059720i" name="Logout concluído">
      <incoming>Flow_1d9k7b6</incoming>
      <incoming>Flow_1jjblcy</incoming>
    </endEvent>
    <sequenceFlow id="Flow_1d9k7b6" sourceRef="Activity_1cj5xbq" targetRef="Event_059720i" />
    <task id="Activity_02iafml" name="API revoga/invalida refresh token e encerra sessão no servidor">
      <incoming>Flow_0idpuwy</incoming>
      <outgoing>Flow_0ghf6ih</outgoing>
    </task>
    <sequenceFlow id="Flow_0idpuwy" sourceRef="Gateway_0b22tmx" targetRef="Activity_02iafml" />
    <sequenceFlow id="Flow_0ghf6ih" sourceRef="Activity_02iafml" targetRef="Activity_1o13pac" />
    <serviceTask id="Activity_1o13pac" name="API responde sucesso e expira cookie httpOnly">
      <incoming>Flow_0ghf6ih</incoming>
      <outgoing>Flow_040guqg</outgoing>
    </serviceTask>
    <sequenceFlow id="Flow_040guqg" sourceRef="Activity_1o13pac" targetRef="Activity_0870n9w" />
    <sequenceFlow id="Flow_1jjblcy" sourceRef="Activity_0870n9w" targetRef="Event_059720i" />
    <serviceTask id="Activity_0870n9w" name="Redireciona para a Tela de Login e exibe “Sessão encerrada”">
      <incoming>Flow_040guqg</incoming>
      <outgoing>Flow_1jjblcy</outgoing>
    </serviceTask>
    <serviceTask id="Activity_1trrije" name="Encerrar sessão local">
      <outgoing>Flow_1ikex4x</outgoing>
    </serviceTask>
    <sequenceFlow id="Flow_1ikex4x" sourceRef="Activity_1trrije" targetRef="Activity_1ywmqne" />
  </process>
  <bpmndi:BPMNDiagram id="BpmnDiagram_1">
    <bpmndi:BPMNPlane id="BpmnPlane_1" bpmnElement="Collaboration_0mcq77p">
      <bpmndi:BPMNShape id="Participant_1fbh1c3_di" bpmnElement="Participant_1fbh1c3" isHorizontal="true">
        <omgdc:Bounds x="152" y="80" width="1128" height="200" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_11k74fr_di" bpmnElement="Event_11k74fr" bioc:stroke="#831311" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#831311">
        <omgdc:Bounds x="322" y="112" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0jnb9od_di" bpmnElement="Gateway_0jnb9od" isMarkerVisible="true" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <omgdc:Bounds x="315" y="185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1y45yut_di" bpmnElement="StartEvent_1y45yut" bioc:stroke="#205022" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#205022">
        <omgdc:Bounds x="202" y="192" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="209" y="235" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0t7vlbd_di" bpmnElement="Activity_0t7vlbd" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <omgdc:Bounds x="440" y="170" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_146shys_di" bpmnElement="Flow_146shys">
        <omgdi:waypoint x="238" y="210" />
        <omgdi:waypoint x="315" y="210" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="240" y="192" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05xirqo_di" bpmnElement="Flow_05xirqo">
        <omgdi:waypoint x="340" y="185" />
        <omgdi:waypoint x="340" y="148" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="345" y="162" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0riygca_di" bpmnElement="Flow_0riygca">
        <omgdi:waypoint x="365" y="210" />
        <omgdi:waypoint x="440" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_01l9s0h_di" bpmnElement="Participant_01l9s0h" isHorizontal="true" isExpanded="true">
        <omgdc:Bounds x="152" y="280" width="1128" height="350" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0hjso1v_di" bpmnElement="Lane_0hjso1v" isHorizontal="true">
        <omgdc:Bounds x="182" y="450" width="1098" height="180" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1p9ohht_di" bpmnElement="Lane_1p9ohht" isHorizontal="true">
        <omgdc:Bounds x="182" y="280" width="1098" height="170" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1trrije_di" bpmnElement="Activity_1trrije" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <omgdc:Bounds x="440" y="330" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ywmqne_di" bpmnElement="Activity_1ywmqne" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <omgdc:Bounds x="440" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1l7j3gp_di" bpmnElement="Activity_1l7j3gp" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <omgdc:Bounds x="590" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0b22tmx_di" bpmnElement="Gateway_0b22tmx" isMarkerVisible="true" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <omgdc:Bounds x="745" y="515" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1cj5xbq_di" bpmnElement="Activity_1cj5xbq" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <omgdc:Bounds x="720" y="310" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_059720i_di" bpmnElement="Event_059720i" bioc:stroke="#831311" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#831311">
        <omgdc:Bounds x="912" y="332" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="888" y="375" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_02iafml_di" bpmnElement="Activity_02iafml" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <omgdc:Bounds x="850" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1o13pac_di" bpmnElement="Activity_1o13pac" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <omgdc:Bounds x="1070" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0870n9w_di" bpmnElement="Activity_0870n9w" bioc:stroke="#0d4372" bioc:fill="#bbdefb" color:background-color="#bbdefb" color:border-color="#0d4372">
        <omgdc:Bounds x="1070" y="310" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1ikex4x_di" bpmnElement="Flow_1ikex4x">
        <omgdi:waypoint x="490" y="410" />
        <omgdi:waypoint x="490" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1l37zzn_di" bpmnElement="Flow_1l37zzn">
        <omgdi:waypoint x="540" y="540" />
        <omgdi:waypoint x="590" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15rou64_di" bpmnElement="Flow_15rou64">
        <omgdi:waypoint x="690" y="540" />
        <omgdi:waypoint x="745" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18b64m8_di" bpmnElement="Flow_18b64m8">
        <omgdi:waypoint x="770" y="515" />
        <omgdi:waypoint x="770" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1d9k7b6_di" bpmnElement="Flow_1d9k7b6">
        <omgdi:waypoint x="820" y="350" />
        <omgdi:waypoint x="912" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0idpuwy_di" bpmnElement="Flow_0idpuwy">
        <omgdi:waypoint x="795" y="540" />
        <omgdi:waypoint x="850" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ghf6ih_di" bpmnElement="Flow_0ghf6ih">
        <omgdi:waypoint x="950" y="540" />
        <omgdi:waypoint x="1070" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_040guqg_di" bpmnElement="Flow_040guqg">
        <omgdi:waypoint x="1120" y="500" />
        <omgdi:waypoint x="1120" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jjblcy_di" bpmnElement="Flow_1jjblcy">
        <omgdi:waypoint x="1070" y="350" />
        <omgdi:waypoint x="948" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_0jqthwh_di" bpmnElement="Association_0jqthwh">
        <omgdi:waypoint x="323" y="125" />
        <omgdi:waypoint x="290" y="116" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_11ckvyg_di" bpmnElement="Association_11ckvyg">
        <omgdi:waypoint x="950" y="556" />
        <omgdi:waypoint x="995" y="570" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_0uo8rtc_di" bpmnElement="TextAnnotation_0uo8rtc">
        <omgdc:Bounds x="200" y="90" width="90" height="41" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1snwqmz_di" bpmnElement="Flow_1snwqmz">
        <omgdi:waypoint x="490" y="250" />
        <omgdi:waypoint x="490" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_0e16eo0_di" bpmnElement="TextAnnotation_0e16eo0">
        <omgdc:Bounds x="980" y="570" width="130" height="50" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
